include ../Makefile.inc
top_builddir = @top_builddir@
module_dir=`$(APXS) -q LIBEXECDIR`
httpd_inc_dir=-I`apxs -q INCLUDEDIR`

all: mod_mapcache.la


install: mod_mapcache.la
	$(INSTALL) -d $(DESTDIR)$(module_dir)
	$(LIBTOOL) --mode=install $(INSTALL) mod_mapcache.la $(DESTDIR)$(module_dir)

mod_mapcache.lo:  mod_mapcache.c
	$(LIBTOOL) --tag CC --mode=compile $(CC) $(ALL_ENABLED) $(CFLAGS) $(INCLUDES) $(httpd_inc_dir) -c mod_mapcache.c

mod_mapcache.la: mod_mapcache.lo ../lib/libmapcache.la
	$(LIBTOOL) --mode=link --tag CC $(CC) -module -rpath $(module_dir) mod_mapcache.lo $(LIBS) ../lib/libmapcache.la -o $@
	
clean:
	rm -f *.o
	rm -f *.so
	rm -f *.slo
	rm -f *.lo
	rm -rf .libs
	rm -f *.la
	rm -f *.sla
	rm -rf *.dSYM

